<p id="notice"><%= notice %></p>

<h1>Requests</h1>

<table>
  <thead>
    <tr>
      <th>From</th>
      <th>Team</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @invites.each do |team_request| %>
      <tr>
        <td><%= team_request.sender.username %></td>
        <td><%= team_request.team.name %></td>
        <td><%= button_to 'Accept', {:controller => "team_requests", :action => "accept", :request_id => team_request.id} , :method=>:post  %></td>

        <td><%= button_to 'Deny', {:controller => "team_requests", :action => "deny", :request_id => team_request.id} , :method=>:post  %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<h1>Sent</h1>

<table>
  <thead>
    <tr>
      <th>To</th>
      <th>Team</th>
      <th>Status</th>
      <th></th>
    </tr>
  </thead>

  <tbody>
    <% @sent.each do |team_request| %>
      <tr>
        <td><%= team_request.reciever.username %></td>
        <td><%= team_request.team.name %></td>
        <td><%= team_request.status %></td>
        <% if team_request.status == "pending" %>
          <td><%= button_to 'Rescind', team_request, method: :delete, data: { confirm: 'Rescind Invitation' } %></td>
        <% end %>
      </tr>
    <% end %>
  </tbody>
</table>

<br>
<%= link_to "Invite user to #{current_user.team.name}", new_team_request_path %>
